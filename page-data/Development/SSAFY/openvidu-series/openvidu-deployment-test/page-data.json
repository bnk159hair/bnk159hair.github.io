{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Development/SSAFY/openvidu-series/openvidu-deployment-test/",
    "result": {"data":{"cur":{"id":"1c1f9d70-da5f-5c47-8464-79e1d5f15360","html":"<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>앞서 글에서 설명한 것처럼 SSAFY 2학기에 접어들면서 저 포함 6명의\r\n팀원이 함께 공통프로젝트를 진행하게 되었습니다.</p>\n<p>공통프로젝트는 WebRTC를 이용한 프로젝트를 진행하게 되는데 제 개인<br>\n클라우드 서버(오라클)과 SSAFY에서 지급한 EC2(AWS)에 WebRTC를<br>\n간편하게 사용할 수 있게 해주는 openvidu 서버를 구축해보면서<br>\n경험한 여러 삽질과 제가 이해한 내용에 대해 정리해보려 합니다.</p>\n<p><a href=\"https://bnk159hair.github.io/Tips/SSAFY/openvidu-series/openvidu-intro/#webrtcweb-real-time-communication%EB%9E%80\">앞선 글</a>을 읽고 이해하시면 아래 내용을 수행하는데 도움이 될거 같습니다.</p>\n<br/>\r\n<br/>\n<h2 id=\"목차\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목차</h2>\n<ul>\n<li>구축하고자 하는 환경 설명</li>\n<li>설치 전 주의할 점</li>\n<li>도커 설치</li>\n<li>포트 개봉</li>\n<li>Deployment 설치</li>\n<li>파일 설정</li>\n<li>실행시키기</li>\n<li>NGINX 설정 변경</li>\n</ul>\n<br/>\r\n<br/>\n<h2 id=\"구축하고자-하는-환경-설명\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EC%B6%95%ED%95%98%EA%B3%A0%EC%9E%90-%ED%95%98%EB%8A%94-%ED%99%98%EA%B2%BD-%EC%84%A4%EB%AA%85\" aria-label=\"구축하고자 하는 환경 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구축하고자 하는 환경 설명</h2>\n<p>openvidu를 통해 화상 기능을 제공하는 것이 저희 프로젝트의 가장 핵심 포인트였기에, 로컬에서 openvidu 도커 이미지를 돌리며 개발하는 것이 아닌 백엔드 팀원이 바로 실제 서버에 배포시키고, 프론트엔드는 해당 서버에 접속하며 개발을 할 수 있는 환경을 구축하고 싶었습니다.</p>\n<p>대략적인 구상도를 그리면 아래와 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQ4y42T247CUAhF+///5bvRWm18sFpvVeu99S5mkdDBGUclIeecAhvY0GC328nxeJTD4aBalqVqURT6Pp/Pajc1G6fF8EYajYYEl8tFTG63WwXC9/1+L9PpVJbLpaxWK9lsNnI6ndSOH/7I/X7XM45jCTCacPdvQGq1mkRRJPV6XQOu1+sfX/vW6XSeAanKv6lgu90qMNX6aqwL8/sX0LIhgOHU7Xal1+s9JcPvIyBOgMBZlmUV+TYgqqRaBonfy5bJYgHocDhUzlqtluR5Ll4Wi4U0m021jUYjnTqxNmUFBJ2MTM/uBFIhFRlXnLzn87nMZjP1w5/JoxXger2Wfr8v4/FYCUcJJivc0LIfCl1QGUIRaZrKYDD4WRuMBFKFgU0mE00CEFwlSVJxxx1aAPbb8MShFyphqmw9memAajnpIgxDabfbOjhbo5dTtv2iDZyNG/uOUCHAKFR8BLRgHIzo3zZbLV/ER0B4hTP/r5oN7qjQ2962DKdMDmV9PBi+8IqNHTXbW0AP4O+vaPm6ZZ/gG5sHfABvKyVwfswSVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"구조도\"\n        title=\"구조도\"\n        src=\"/static/d33c6b645b2b4466a1824a6e19892220/37523/00.png\"\n        srcset=\"/static/d33c6b645b2b4466a1824a6e19892220/e9ff0/00.png 180w,\n/static/d33c6b645b2b4466a1824a6e19892220/f21e7/00.png 360w,\n/static/d33c6b645b2b4466a1824a6e19892220/37523/00.png 720w,\n/static/d33c6b645b2b4466a1824a6e19892220/5d030/00.png 771w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\r\n<br/>\n<h2 id=\"설치-전-주의할-점\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98-%EC%A0%84-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\" aria-label=\"설치 전 주의할 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치 전 주의할 점</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAAA+klEQVQoz1WSjYrDMAyD9/5vWbitl16T5j9p006HPDy2wIftQhTJ9HaeJ2KMcM4hhICcEvox0MeF/bzQxins48QYA8dxfLHvO67rAs/z+cRNGwpaa5FSgg8Bzr+wPiCVitoaWq3ovaOUgsa5NZl5/y2ow2OeMU0Tfu53GGPwO8/Cshgsxsg3TbFtm4jSMfk8b8EksS3suiJ4L05Jzlkq10J01pjqTJHItXVYH7HFhFAqQmmIOYsLChDuijCiVqLRCd2KYC4VD7PA/K1SF+uwOgdnrcTUqMR7L07ZawpNwAdEkMq1FIFupK/11dcqTnlJHbPnHf4hn5Vr+AexAR4bgT064QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"포트 이미지\"\n        title=\"포트 이미지\"\n        src=\"/static/221932cdd3d86c221832b49189f07ea8/37523/01.png\"\n        srcset=\"/static/221932cdd3d86c221832b49189f07ea8/e9ff0/01.png 180w,\n/static/221932cdd3d86c221832b49189f07ea8/f21e7/01.png 360w,\n/static/221932cdd3d86c221832b49189f07ea8/37523/01.png 720w,\n/static/221932cdd3d86c221832b49189f07ea8/38a65/01.png 1075w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>openvidu가 사용하는 포트는 위와 같습니다. 그런데 다른 프로세스들이 해당 포트를 사용하고 있으면 openvidu는 정상적으로 작동하지 않습니다.</li>\n<li>그래서 가장 좋은건 다른 무엇보다 먼저 openvidu를 설치하는 것입니다.\r\n저는 <a href=\"https://velog.io/@kwak0568/OpenVidu-%EB%B0%B0%ED%8F%AC-Port%EC%99%80%EC%9D%98-%EC%A0%84%EC%9F%81\">해당글</a>을 보고 서버를 받자마자 openvidu deployment를 설치했습니다.</li>\n<li>openvidu deployment에 커스텀된 NGINX도 포함되니 가급적 openvidu deployment 먼저 설치하시는걸 추천합니다.</li>\n</ul>\n<br/>\r\n<br/>\n<h2 id=\"도커-설치\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%84%A4%EC%B9%98\" aria-label=\"도커 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도커 설치</h2>\n<p>openvidu deployment를 설치하기 위해서는 도커가 설치되어 있어야 합니다.<br>\n가장 좋은건 <a href=\"https://docs.docker.com/engine/install/#server\">공식문서</a>를 보고 설치하는 것이지만 아래에도 적어 놓겠습니다. 서버의 OS가 Ubuntu 20.04이기에 아래 과정은 Ubuntu 20.04 기준입니다.</p>\n<br/>\n<h3 id=\"구버전-지우기\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EB%B2%84%EC%A0%84-%EC%A7%80%EC%9A%B0%EA%B8%B0\" aria-label=\"구버전 지우기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구버전 지우기</h3>\n<p>EC2를 새로 발급받은 상태면 필요없을 수 있지만 혹시 모르니 진행합니다.<br>\n지워야할 패키지는 다음과 같습니다.</p>\n<ul>\n<li>docker.io</li>\n<li>docker-compose</li>\n<li>docker-doc</li>\n<li>podman-docker</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">for pkg in docker.io docker-doc docker-compose podman-docker containerd runc; do sudo apt-get remove $pkg; done</code></pre></div>\n<br/>\n<h3 id=\"apt-repository를-통해-설치\" style=\"position:relative;\"><a href=\"#apt-repository%EB%A5%BC-%ED%86%B5%ED%95%B4-%EC%84%A4%EC%B9%98\" aria-label=\"apt repository를 통해 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>apt repository를 통해 설치</h3>\n<p>설치 방법도 4가지 정도 있지만 제기준 가장 편한 apt repository를 통해 설치하겠습니다.</p>\n<br/>\n<h4 id=\"repository-설정\" style=\"position:relative;\"><a href=\"#repository-%EC%84%A4%EC%A0%95\" aria-label=\"repository 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>repository 설정</h4>\n<ol>\n<li>apt 패키지 인덱스를 업데이트 하고 https로 repository를 이용할 수 있게 apt에 패키지를 설치합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get update\r\nsudo apt-get install ca-certificates curl gnupg</code></pre></div>\n<ol start=\"2\">\n<li>도커의 official GPG key를 추가합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo install -m 0755 -d /etc/apt/keyrings\r\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\r\nsudo chmod a+r /etc/apt/keyrings/docker.gpg</code></pre></div>\n<ol start=\"3\">\n<li>아래 명령어를 통해 repository를 설정합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">echo \\\r\n  \"deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\r\n  \"$(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\")\" stable\" | \\\r\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null</code></pre></div>\n<ol start=\"4\">\n<li>apt 패키지 인덱스를 update 합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get update</code></pre></div>\n<br/>\n<h4 id=\"도커-엔진-설치\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%97%94%EC%A7%84-%EC%84%A4%EC%B9%98\" aria-label=\"도커 엔진 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도커 엔진 설치</h4>\n<ol>\n<li>아래 명령어를 통해 최신 버전의 도커 엔진, containerd, 도커 컴포즈를 설치합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></pre></div>\n<ol start=\"2\">\n<li>아래 명령어를 통해 도커 설치가 완료되었는지 확인합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo docker run hello-world</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABJ0AAASdAHeZh94AAACsUlEQVQ4y11TWXLTQBBV+IBQSUiFIlWQkEAcx3biTYttjWTtshbLipeYpAo+uCiC4gqchAsMPKpHXkI+prp7evrpve6WNP06/r53ePBjZ+fZr+cvdn8fv3v/kwXZNzvOijCfFyxICjfJi2AyK+wkL9q6VVzJg6KusqKuGUVDM4RfU3RhpXSxhDUaw0tyRNMlwnyBZPGw8YN8AWXoo+eEuOkPUVcZ6qqBmqKj2u2h2umJu4ZW3kn58jPXDJvLffbnuqP87WgD3lI0Xmk0+Xm1wc8ua/z0ospPPlT4ebXOj0/O+NHxW75/eMRf7h/w3b19/ur1G35aqfG6yrikezE6ugXVdCAzG82+iWbPQEtjuGorIicbDpShB3Xooyb3cdFU8PGmi0pLFQwv29qGqWQECYZRBjedggUJOoaLDnPQNVwoVoCu6YlYNj00+0OR7zkjaHYI1Qqg2gGue2bZCpJMyb4bQbPLJPn0kGLKUe/6Tig+pli+AOqaLpoDS/SUbENjon+CYZDNEU+X8LMpRrd3iGefhI3E3UxYL5siu3sQKvruaAPY1m20BhaulAFqCisBrThHfv8FzI9hhmMMvAjMT1bMRmUclLERpBi4FKcwwxS6H0P3IrSZvWU4HGWCYZjPN6zi2RL+eIZgMhds6c5J8k1MNp3fC7CyNeF2bZRhAHM0Fizc9FbsHEmRV8MgeW3moKXbwnYM8q2NT2/obADpC4K6H6+klTIJkKSsC6iY3pKlodEW0BoR0JU82Eq2k4lYGwKhHpE0b1yuEAHKpiuK6ax9UkGWlBBg+feUk5bseAIvncKKMjFNawWuWv5q58JypQQrB6odikmTgjXIYytRMcmkPmqrx7Rv9HWSSnLWh4q2sf4fs7UvWdFEgJFUK85gjlL4k7lYCzvJBfDjgqfnae4f/PTsdMgltMIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"설치 완료\"\n        title=\"설치 완료\"\n        src=\"/static/a52ebb1a7d38a1394ccb1ec430e9ce73/37523/02.png\"\n        srcset=\"/static/a52ebb1a7d38a1394ccb1ec430e9ce73/e9ff0/02.png 180w,\n/static/a52ebb1a7d38a1394ccb1ec430e9ce73/f21e7/02.png 360w,\n/static/a52ebb1a7d38a1394ccb1ec430e9ce73/37523/02.png 720w,\n/static/a52ebb1a7d38a1394ccb1ec430e9ce73/612f7/02.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\r\n위와 같이 화면이 나온다면 성공적으로 완료된 것입니다.\n<br/>\r\n<br/>\n<h2 id=\"포트-개방\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%ED%8A%B8-%EA%B0%9C%EB%B0%A9\" aria-label=\"포트 개방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포트 개방</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ufw allow ssh\r\nufw allow 80/tcp\r\nufw allow 443/tcp\r\nufw allow 3478/tcp\r\nufw allow 3478/udp\r\nufw allow 40000:57000/tcp\r\nufw allow 40000:57000/udp\r\nufw allow 57001:65535/tcp\r\nufw allow 57001:65535/udp\r\nufw enable</code></pre></div>\n<br/>\r\n<br/>\n<p>포트 개방 전 ufw가 설치 되어있는지 확인하시기 바랍니다.(제가 받은 EC2는 설치 되어있었습니다.)</p>\n<h2 id=\"deployment-설치\" style=\"position:relative;\"><a href=\"#deployment-%EC%84%A4%EC%B9%98\" aria-label=\"deployment 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deployment 설치</h2>\n<ol>\n<li>/opt에 openvidu를 설치하는 것이 권장되기에 root 계정으로 전환합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su</code></pre></div>\n<ol start=\"2\">\n<li>디렉토리 변경</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /opt</code></pre></div>\n<ol start=\"3\">\n<li>openvidu deployment 다운로드</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl https://s3-eu-west-1.amazonaws.com/aws.openvidu.io/install_openvidu_latest.sh | bash</code></pre></div>\n<ol start=\"4\">\n<li>성공적으로 openvidu 폴더가 다운로드 되면 아래와 같은 화면이 나옵니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">=======================================\r\nOpenvidu Platform successfully installed.\r\n=======================================\r\n\r\n1. Go to openvidu folder:\r\n$ cd openvidu\r\n\r\n2. Configure DOMAIN_OR_PUBLIC_IP and OPENVIDU_SECRET in .env file:\r\n$ nano .env\r\n\r\n3. Start OpenVidu\r\n$ ./openvidu start\r\n\r\nFor more information, check:\r\nhttps://docs.openvidu.io/en/stable/deployment/ce/on-premises/</code></pre></div>\n<br/>\r\n<br/>\n<h2 id=\"파일-설정\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EC%9D%BC-%EC%84%A4%EC%A0%95\" aria-label=\"파일 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파일 설정</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># OpenVidu configuration\r\n# ----------------------\r\n# Documentation: https://docs.openvidu.io/en/stable/reference-docs/openvidu-config/\r\n\r\n# NOTE: This file doesn't need to quote assignment values, like most shells do.\r\n# All values are stored as-is, even if they contain spaces, so don't quote them.\r\n\r\n# Domain name. If you do not have one, the public IP of the machine.\r\n# For example: 198.51.100.1, or openvidu.example.com\r\nDOMAIN_OR_PUBLIC_IP=\r\n\r\n# OpenVidu SECRET used for apps to connect to OpenVidu server and users to access to OpenVidu Dashboard\r\nOPENVIDU_SECRET=\r\n\r\n# Certificate type:\r\n# - selfsigned:  Self signed certificate. Not recommended for production use.\r\n#                Users will see an ERROR when connected to web page.\r\n# - owncert:     Valid certificate purchased in a Internet services company.\r\n#                Please put the certificates files inside folder ./owncert\r\n#                with names certificate.key and certificate.cert\r\n# - letsencrypt: Generate a new certificate using letsencrypt. Please set the\r\n#                required contact email for Let's Encrypt in LETSENCRYPT_EMAIL\r\n#                variable.\r\nCERTIFICATE_TYPE=selfsigned\r\n\r\n# If CERTIFICATE_TYPE=letsencrypt, you need to configure a valid email for notifications\r\nLETSENCRYPT_EMAIL=user@example.com\r\n...</code></pre></div>\n<p><code class=\"language-text\">.env</code> 파일을 수정해서 openvidu 환경설정을 마무리 해야합니다.</p>\n<ol>\n<li><code class=\"language-text\">DOMAIN_OR_PUBLIC_IP</code>과 <code class=\"language-text\">OPENVIDU_SECRET</code> 값을 변경해주세요. 값이 비어있으면 작동이 안됩니다.</li>\n<li><code class=\"language-text\">CERTIFICATE_TYPE</code>을 변경해야합니다. 기본값은 selfsigned일텐데 저희는 외부(프론트엔드)에서 접속을 할 것이기에 자동으로 인증서를 발급해주는 letsencrypt로 변경해주었습니다.<br>\n메일 주소도 설정해주어야 하는데 실제 존재하는 메일주소를 입력해주세요.<br>\n원래대로라면 NGINX를 설치하고 certbot을 통해 letsencrypt 인증서를 발급받아야하지만 openvidu deployment에서 위와 같은 작업을 .env 설정 변경을 통해 다 해줍니다. (저는 openvidu가 이러한 작업을 해주는지 모르고 여러 삽질을 했습니다.)</li>\n</ol>\n<br/>\r\n<br/>\n<h2 id=\"실행시키기\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89%EC%8B%9C%ED%82%A4%EA%B8%B0\" aria-label=\"실행시키기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행시키기</h2>\n<p>실행은 아래 명령어를 통해 실행시킬 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">./openvidu start</code></pre></div>\n<p>그러면 아래와 같은 화면이 나오게 되고</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Creating openvidu-docker-compose_coturn_1          ... done\r\nCreating openvidu-docker-compose_app_1             ... done\r\nCreating openvidu-docker-compose_kms_1             ... done\r\nCreating openvidu-docker-compose_nginx_1           ... done\r\nCreating openvidu-docker-compose_redis_1           ... done\r\nCreating openvidu-docker-compose_openvidu-server_1 ... done</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">----------------------------------------------------\r\n\r\n   OpenVidu Platform is ready!\r\n   ---------------------------\r\n\r\n   * OpenVidu Server: https://DOMAIN_OR_PUBLIC_IP/\r\n\r\n   * OpenVidu Dashboard: https://DOMAIN_OR_PUBLIC_IP/dashboard/\r\n\r\n----------------------------------------------------</code></pre></div>\n<p>해당 화면이 나오게 된다면 성공적으로 완료된 것입니다.<br>\nstart 외에도 stop, restart 같은 명령어를 사용할 수 있습니다.<br>\n./openvidu start를 하게 되면 도커 컴포즈 파일을 실행 시키는 것이기에</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker compose up -d</code></pre></div>\n<p>로 진행해도 성공적으로 작동하게 됩니다.</p>\n<br/>\r\n<br/>\n<h2 id=\"내가-개발한-openvidu-based-application-배포\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EA%B0%80-%EA%B0%9C%EB%B0%9C%ED%95%9C-openvidu-based-application-%EB%B0%B0%ED%8F%AC\" aria-label=\"내가 개발한 openvidu based application 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>내가 개발한 openvidu based application 배포</h2>\n<p>본인이 개발한 openvidu based application을 배포 하고 싶다면 해당 어플리케이션을 도커 이미지화 한 다음\r\n<code class=\"language-text\">docker-compose.override.yml</code>을 수정해야합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">version: '3.1'\r\n\r\nservices:\r\n    app:\r\n        image: your-image-name:X.Y.Z\r\n        restart: on-failure\r\n        network_mode: host\r\n        environment:\r\n            - SERVER_PORT=5442\r\n            - OPENVIDU_URL=http://localhost:5443\r\n            - OPENVIDU_SECRET=${OPENVIDU_SECRET}</code></pre></div>\n<p>위의 코드에서 image를 application의 이미지로 수정하면 됩니다.<br>\n기본값은 openvidu가 제공하는 비디오 회의 앱입니다.<br>\n위의 이미지만 수정하면 도메인 주소로 접속시 설정한 어플리케이션이 나타나는 것을 확인할 수 있습니다.</p>\n<br/>\r\n<br/>\n<h2 id=\"nginx-설정-변경\" style=\"position:relative;\"><a href=\"#nginx-%EC%84%A4%EC%A0%95-%EB%B3%80%EA%B2%BD\" aria-label=\"nginx 설정 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NGINX 설정 변경</h2>\n<p>하지만 저의 경우에는 당장 프론트엔드 배포가 아닌 2개의 백엔드 서버를 올려야 했기에 NGINX 설정을 수정해야 했습니다.<br>\n저와 같은 사람을 위해 openvidu에서 어떻게 해야하는지 알려줍니다.</p>\n<ol>\n<li>openvidu가 정상적으로 돌아갈 수 있게 .env 파일을 수정한 후 최소 한번 openvidu server를 실행시켜야합니다. 그래야 nginx를 수정할 수 있는 default.conf가 생성 됩니다.</li>\n<li>nginx가 실행중일 때 아래 명령어를 통해 nginx의 설정 파일을 가져옵니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su\r\ncd /opt/openvidu\r\ndocker-compose exec nginx cat /etc/nginx/conf.d/default.conf > custom-nginx.conf\r\ndocker-compose exec nginx cat /etc/nginx/nginx.conf > nginx.conf</code></pre></div>\n<p>위 명령어를 실행하면 <code class=\"language-text\">/opt/openvidu/custom-nginx.conf</code>와 <code class=\"language-text\">/opt/openvidu/nginx.conf</code>가 생성됩니다. 3. /opt/openvidu에서 생성된 custon-nginx.conf를 수정하면 됩니다. 4. nginx.conf도 수정할 수 있지만 아래의 코드를 지우면 custon-nginx.conf를 불러올 수 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">include /etc/nginx/conf.d/*.conf;\r\ninclude /etc/nginx/vhost.d/*.conf;</code></pre></div>\n<ol start=\"5\">\n<li>아래 코드를 추가하여 nginx 서비스에 volume을 추가합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    nginx:\r\n        ...\r\n        volumes:\r\n            ...\r\n            - ./custom-nginx.conf:/custom-nginx/custom-nginx.conf\r\n            - ./nginx.conf:/etc/nginx/nginx.conf</code></pre></div>\n<br/>\r\n추가적인 어플리케이션을 추가하고 싶다면 docker-compose 파일 수정과 nginx 파일 수정을 통해 완료할 수 있습니다.\n<p>저의 경우 custom-nginx.conf에 yourapp에 제가 작성한 백엔드 서버를 우선 넣었고, 비즈니스 백엔드 서버도 추가했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Your App\r\nupstream yourapp {\r\n    server localhost:5442;\r\n}\r\n\r\nupstream openviduserver {\r\n    server localhost:5443;\r\n}\r\n\r\nupstream backendserver {\r\n    server localhost:8081;\r\n}\r\n\r\nupstream jenkinsserver {\r\n    server localhost:10207;\r\n}\r\n...\r\n\r\nserver {\r\n    listen 443 ssl;\r\n    listen [::]:443 ssl;\r\n\r\n...\r\n\r\n   location /api/v1 {\r\n        proxy_pass http://backendserver;\r\n    }\r\n</code></pre></div>\n<p>docker-compose.override.yml은 다음과 같이 수정했구요</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">version: '3.1'\r\n\r\nservices:\r\n    # --------------------------------------------------------------\r\n    #\r\n    #    Change this if your want use your own application.\r\n    #    It's very important expose your application in port 5442\r\n    #    and use the http protocol.\r\n    #\r\n    #    Default Application\r\n    #\r\n    #    Openvidu-Call Version: 2.28.0\r\n    #\r\n    # --------------------------------------------------------------\r\n    app:\r\n        image: openvidu_api_server\r\n        restart: on-failure\r\n        network_mode: host\r\n        environment:\r\n            - SERVER_PORT=5442\r\n            - OPENVIDU_URL=http://localhost:5443\r\n            - OPENVIDU_SECRET=${OPENVIDU_SECRET}\r\n            - DB_URL=${DB_URL}\r\n            - DB_USER=${DB_USER}\r\n            - DB_PASSWD=${DB_PASSWD}\r\n        logging:\r\n            options:\r\n                max-size: \"${DOCKER_LOGS_MAX_SIZE:-100M}\"\r\n        volumes:\r\n            - /home/ubuntu/recordings:/var/lib/recordings\r\n\r\n    back:\r\n        image: api_server\r\n        restart: on-failure\r\n        network_mode: host\r\n        logging:\r\n            options:\r\n                max-size: \"${DOCKER_LOGS_MAX_SIZE:-100M}\"\r\n</code></pre></div>\n<!-- ## 삽질한 부분\r\n\r\n또한 제 컴퓨터의 크롬 브라우저는 성공적으로 서버 접속이 되는데, 다른 브라우저와\r\n팀원들의 컴퓨터는 접속할 수 없는 문제가 있었습니다\r\n이 문제는 .env 파일에서 ssl 관련 인증을 letsencrypt로 수정하면서 해결되었습니다.\r\n공식 문서에서 서로 다른 하드웨어에 서비스들을 각각 구축할 경우, 프록시 서버를 통해 통신해야한다고 이야기 했지만\r\n제 크롬 브라우저에서는 성공적으로 접속한 점과 openvidu 컨테이너에서 이미 nginx를 사용하는데, 내가 어떻게 건들 수 있나? 라는 생각 때문에 많은 삽질과 시간을 버렸습니다...\r\n우선 제 브라우저가 이상해서 접속이 되었던 것이고, openvidu deployment에서 nginx 컨테이너도 포함되어있기에 .env파일을 수정하는 것만으로 ssl 인증서 발급과 https 프록시 서버까지 해결해줍니다.\r\n편하게 사용하시면 됩니다.\r\n\r\n기본적으로 ./openvidu start 명령어는 docker compose 명령어를 실행하는 것이기에\r\ndocker에 대해서 잘 모르시는 분들은 공부를 해보시고 구축하시면 도움이 많이 될것입니다.\r\n\r\n처음 글을 작성할 때는 대단한 것을 발견한 것처럼 썼는데 docker compose가 어떻게 구성되는지 알고 나서는\r\n너무 당연한 내용들이네요 -->\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://velog.io/@ohsg97/openVidu-tutorial-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">openvidu 개념1</a><br>\n<a href=\"https://2jinishappy.tistory.com/335\">openvidu 개념2</a><br>\n<a href=\"https://docs.openvidu.io/en/stable/application-server/openvidu-basic-java/\">openvidu 공식 문서-자바 어플리케이션 서버</a><br>\n<a href=\"https://docs.openvidu.io/en/stable/deployment/ce/on-premises/\">openvidu 공식 문서-온프레미스로 배포하기</a><br>\n<a href=\"https://docs.openvidu.io/en/stable/deployment/deploying-openvidu-apps/#with-docker\">openvidu 공식 문서-openvidu 어플리케이션 배포관련</a><br>\n<a href=\"https://docs.openvidu.io/en/stable/tutorials/openvidu-react/\">openvidu 공식 문서-openvidu 리액트 클라이언트 예제</a><br>\n<a href=\"https://docs.openvidu.io/en/2.28.0/troubleshooting/#162-modify-openvidu-nginx-configuration\">openvidu nginx 설정 변경</a>\r\n<a href=\"https://hoonti06.gitlab.io/wiki/deploying-openvidu-on-premises/#openvidu%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-application%EC%9D%84-openvidu%EA%B0%80-%EB%B0%B0%ED%8F%AC%EB%90%98%EB%8A%94-%EC%84%9C%EB%B2%84%EC%97%90-%EA%B0%99%EC%9D%B4-%EB%B0%B0%ED%8F%AC%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">openvidu 배포 관련 게시글</a>\r\n<a href=\"https://velog.io/@kwak0568/OpenVidu-%EB%B0%B0%ED%8F%AC-Port%EC%99%80%EC%9D%98-%EC%A0%84%EC%9F%81\">싸피 선배님의 조언-포트관련</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AA%A9%EC%B0%A8\">목차</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B5%AC%EC%B6%95%ED%95%98%EA%B3%A0%EC%9E%90-%ED%95%98%EB%8A%94-%ED%99%98%EA%B2%BD-%EC%84%A4%EB%AA%85\">구축하고자 하는 환경 설명</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%84%A4%EC%B9%98-%EC%A0%84-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\">설치 전 주의할 점</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8F%84%EC%BB%A4-%EC%84%A4%EC%B9%98\">도커 설치</a></p>\n<ul>\n<li>\n<p><a href=\"#%EA%B5%AC%EB%B2%84%EC%A0%84-%EC%A7%80%EC%9A%B0%EA%B8%B0\">구버전 지우기</a></p>\n</li>\n<li>\n<p><a href=\"#apt-repository%EB%A5%BC-%ED%86%B5%ED%95%B4-%EC%84%A4%EC%B9%98\">apt repository를 통해 설치</a></p>\n<ul>\n<li><a href=\"#repository-%EC%84%A4%EC%A0%95\">repository 설정</a></li>\n<li><a href=\"#%EB%8F%84%EC%BB%A4-%EC%97%94%EC%A7%84-%EC%84%A4%EC%B9%98\">도커 엔진 설치</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%8F%AC%ED%8A%B8-%EA%B0%9C%EB%B0%A9\">포트 개방</a></p>\n</li>\n<li>\n<p><a href=\"#deployment-%EC%84%A4%EC%B9%98\">Deployment 설치</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%8C%8C%EC%9D%BC-%EC%84%A4%EC%A0%95\">파일 설정</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%ED%96%89%EC%8B%9C%ED%82%A4%EA%B8%B0\">실행시키기</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%82%B4%EA%B0%80-%EA%B0%9C%EB%B0%9C%ED%95%9C-openvidu-based-application-%EB%B0%B0%ED%8F%AC\">내가 개발한 openvidu based application 배포</a></p>\n</li>\n<li>\n<p><a href=\"#nginx-%EC%84%A4%EC%A0%95-%EB%B3%80%EA%B2%BD\">NGINX 설정 변경</a></p>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>\n</div>","excerpt":"개요 앞서 글에서 설명한 것처럼 SSAFY 2학기에 접어들면서 저 포함 6명의\r\n팀원이 함께 공통프로젝트를 진행하게 되었습니다. 공통프로젝트는 WebRTC를 이용한 프로젝트를 진행하게 되는데 제 개인 클라우드 서버(오라클)과 SSAFY에서 지급한 EC2(AWS)에 WebRTC를 간편하게 사용할 수 있게 해주는 openvidu 서버를 구축해보면서 경험한 여러 삽질과 제가 이해한 내용에 대해 정리해보려 합니다. 앞선 글을 읽고 이해하시면 아래 내용을 수행하는데 도움이 될거 같습니다. 목차 구축하고자 하는 환경 설명 설치 전 주의할 점 도커 설치 포트 개봉 Deployment 설치 파일 설정 실행시키기 NGINX 설정 변경 구축하고자 하는 환경 설명 openvidu를 통해 화상 기능을 제공하는 것이 저희 프로젝트의 가장 핵심 포인트였기에, 로컬에서 openvidu 도커 이미지를 돌리며 개발하는 것이 아닌 백엔드 팀원이 바로 실제 서버에 배포시키고, 프론트엔드는 해당 서버에 접속하며 개발…","frontmatter":{"date":"August 05, 2023","title":"Openvidu Deployment EC2 온프레미스 구축 후기","categories":"개발공부 featured","author":"하이영","emoji":"💻"},"fields":{"slug":"/Development/SSAFY/openvidu-series/openvidu-deployment-test/"}},"next":{"id":"c818d894-a606-53be-a0ce-5882d054204d","html":"<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>SSAFY 2학기에 접어들면서 저 포함 6명의\r\n팀원이 함께 공통프로젝트를 진행하게 되었습니다.</p>\n<p>원래는 openvidu를 온프레미스로 구축한 경험글 하나로 퉁쳐서<br>\n작성하려 했는데 생각보다 내용이 많아서 따로 정리하게 됩니다.\r\n<br/>\r\n<br/></p>\n<h2 id=\"webrtcweb-real-time-communication란\" style=\"position:relative;\"><a href=\"#webrtcweb-real-time-communication%EB%9E%80\" aria-label=\"webrtcweb real time communication란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebRTC(Web Real-Time Communication)란</h2>\n<ul>\n<li>\n<p>웹 브라우저가 서로 통신할 수 있도록 설계된 API</p>\n</li>\n<li>\n<p>별도의 플러그인이나 소프트웨어 없이 실시간으로 데이터(음성, 영상, 텍스트, 파일)를 서버(중계자) 없이 브라우저 간에 교환할 수 있도록 하는 기술</p>\n</li>\n<li>\n<p>WebRTC 기술은 <strong>P2P(Peer-to-Peer)</strong> 통신에 최적화</p>\n</li>\n<li>\n<p>브라우저끼리 P2P 통신을 사용하기에 별도의 서버가 필요 없어 보이지만, 다음과 같은 서버들을 필요로한다.</p>\n<ol>\n<li>시그널링(Signaling)이라 불리는, 클라이언트들의 통신을 조정하기 위한 메타데이터의 교환 서버</li>\n<li>NAT 환경 및 방화벽 대응을 위한 서버(STUN / TURN Server)</li>\n</ol>\n</li>\n</ul>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZUlEQVQoz41Sy26DQAzM//9SDz30ECnqQ02aplECgQIboITXZnnuMpWXggLtoSNZQeN4PLZ3gRt0XYc5lFJ4fdthtz/2/5nl5zULIoYgXDlHlmVopURVVRBCwPEYGDujLEvNSSkRxzGKohhFh1jcEgQSC4JAFxNX1zX8wEcYhpojxyQU+D6EmAqODgdQ97Zt8V80TYOmqSfja4c0wvvHAYZpacGyrFDVDTjnsCwLnufhzBiYxyCKQufqptX5/cHQK5FS9Q57QYW7+wc8vqypDU62B+PkIo4TvUNqQk05zxGGEfZHG2HU55arZx2ToxCi6IKiLPU37YiKCSRm2Y6+Mu2TkMTxuJokSZHnfDryIDr8UvH6bTd2dVymR+u6fqzl6glf0eXP57O4JdQPaX+6sB23f4dSYr3ZYLvdaod05YNxQpJmvy48Opy6VHBdVwe9YtpdmqbIswxSKQhxhWmaer9zQXL4DaDHBwMX+LPYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WebRTC-구조\"\n        title=\"WebRTC-구조\"\n        src=\"/static/ac20b4f1c257031480e683ef8015c1a3/37523/01.png\"\n        srcset=\"/static/ac20b4f1c257031480e683ef8015c1a3/e9ff0/01.png 180w,\n/static/ac20b4f1c257031480e683ef8015c1a3/f21e7/01.png 360w,\n/static/ac20b4f1c257031480e683ef8015c1a3/37523/01.png 720w,\n/static/ac20b4f1c257031480e683ef8015c1a3/302a4/01.png 1080w,\n/static/ac20b4f1c257031480e683ef8015c1a3/68947/01.png 1281w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<h3 id=\"signaling--server\" style=\"position:relative;\"><a href=\"#signaling--server\" aria-label=\"signaling  server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signaling / Server</h3>\n<br/>\n<ul>\n<li>서로 다른 네트워크 환경에 있는 두 개의 peer간에 통신을 위해서는 서로 상대방의 정보(위치 및 포맷)을 먼저 파악할 필요가 있음</li>\n<li>RTCPeerConnection들이 적절하게 데이터를 교환할 수 있게 처리해주는 과정</li>\n<li>이를 수행하는 서버 = <strong>시그널 서버</strong></li>\n<li>전이중 통신을 지원하는 <strong>websocket</strong>으로 이를 구현하는 것이 가장 적합</li>\n<li><code class=\"language-text\">세션제어메세지</code>, <code class=\"language-text\">네트워크 구성</code>, <code class=\"language-text\">미디어 기능</code> 정보 교환</li>\n<li>시그널링은 P2P 스트리밍 시작 전에 성공적으로 완료되어야 함\n<ul>\n<li><strong>세션 제어 메세지</strong> : 통신을 초기화하거나 닫고 오류를 보고</li>\n<li><strong>네트워크 구성</strong> : 외부세계에 컴퓨터의 ip주소와 포트가 무엇인지 파악</li>\n<li><strong>미디어 기능</strong> : 브라우저와 통신하려는 브라우저에서 처리할 수 있는 코덱과 해상도를 파악</li>\n</ul>\n</li>\n<li>서버는 단지 웹 브라우저를 특정하기 위한 <strong>시그널링 과정으로만 쓰임</strong></li>\n<li>시그널링을 마친 뒤 실제 데이터는 P2P 혹은 중개 서버를 통해 주고 받음</li>\n<li>서버에서는 websocket(TCP) 사용 (WebRTC는 UDP)</li>\n<li>크게 SDP(Session Description Protocol)과 ICE(Interactive Connectivity Establishment) Candidate들을 주고받음</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- SDP 형식에는 미디어를 전송하기 위한 설정값(해상도, 포맷, 코덱 등)이 포함되어 있다.\r\n- ICE는 peer간을 연결할 수 있게 하도록 최적 경로를 찾아주는 프레임워크이며,\r\nSTUN/TURN 서버르 통해 찾아낸 주소를 Candidate라 한다.</code></pre></div>\n<br/>\r\n<br/>\n<h3 id=\"stunsession-traversal-utilities-for-nat-server\" style=\"position:relative;\"><a href=\"#stunsession-traversal-utilities-for-nat-server\" aria-label=\"stunsession traversal utilities for nat server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STUN(Session Traversal Utilities for NAT) Server</h3>\n<ul>\n<li>통상적인 네트워크에서 통신하기 위해서는 Public IP를 필요로 하며, NAT 환경(사설망)에 놓인 클라이언트는 자신의 Public IP를 알지 못한다.</li>\n<li>STUN 서버는 peer 자신의 Public IP를 알려주는 서버</li>\n</ul>\n<br/>\r\n<br/>\n<h3 id=\"turntraversal-using-relays-around-nat-server\" style=\"position:relative;\"><a href=\"#turntraversal-using-relays-around-nat-server\" aria-label=\"turntraversal using relays around nat server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TURN(Traversal Using Relays around NAT) Server</h3>\n<ul>\n<li>만약 두 peer가 같은 NAT환경(사설망)에 있거나, 보호 정책이 엄격한 NAT/Router, 방화벽 등의 이유로 P2P 통신이 실패되는 때도 있는데, 이러한 상황에서 사용되는 것이 TURN 서버이다.</li>\n<li>TURN 서버는 Public 망에 존재하므로 각 peer들이 접속할 수 있으며, 각 peer들은 P2P 통신을 하는 것이 아닌 TURN 서버(릴레이 서버 역할)를 경유하여 통신하게 된다.</li>\n<li>아무래도 직접 통신하지 않고 TURN 서버가 모든 트래픽을 중계하며 통신하기 때문에 오버헤드와 지연이 발생할 수 있어 어쩔 수 없는 경우에만 사용</li>\n</ul>\n<p><a href=\"https://velog.io/@yyong3519/WebRTC-%EA%B0%9C%EB%85%90#webrtc-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC\">더욱 자세하게 설명되어있는 글입니다.</a></p>\n<br/>\r\n<br/>\r\n<br/>\r\n<br/>\n<h2 id=\"openvidu란\" style=\"position:relative;\"><a href=\"#openvidu%EB%9E%80\" aria-label=\"openvidu란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Openvidu란</h2>\n<ul>\n<li>웹 또는 모바일 애플리케이션에서 화상 통화를 쉽게 추가할 수 있는 오픈소스 플랫폼,</li>\n<li>Kurento기반의 중개 서버를 애플리케이션에 쉽게 추가할 수 있도록 완전한 기술스택을 제공</li>\n<li>Kurento : WebRTC 미디어 서버 역할을 함과 동시에 WebRTC 기술을 이용해 애플리케이션 개발을 돕는 클라이언트 API세트\n<ul>\n<li>그룹간의 통신, 녹음, 방송, 시청각 흐름의 라우팅 기술을 지원하고 있다.<br>\n<a href=\"https://gh402.tistory.com/43\">쿠렌토에 대한 자세한 내용은 여기를 참조해주세요</a></li>\n</ul>\n</li>\n<li>가장 큰 장점은 모든 하위 수준의 작업들을 추상화 시켜, WebRTC, ICE Candidates, KMS등의 까다로운 기술들을 몰라도 쉽게 사용할 수 있다는 점</li>\n<li>따라서 WebRTC 미디어 서버를 구현하는 데 소모되는 리소스를 절약해서 빠르게 실시간 통신을 추가할 수 있도록 도와주는 것이 큰 장점이다.</li>\n</ul>\n<br/>\r\n<br/>\n<h3 id=\"openvidu의-구조\" style=\"position:relative;\"><a href=\"#openvidu%EC%9D%98-%EA%B5%AC%EC%A1%B0\" aria-label=\"openvidu의 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Openvidu의 구조</h3>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 553px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABJ0AAASdAHeZh94AAAC2UlEQVQ4y41U6W7aQBDm6fpqfYk+QKpKVVNVJSo/Whvb0EAw4UyM8QU+MOZIbMJhyFfNtmtxpclIn1h2Zj9/OzszOQB4fn7G09MT4jjB42KNx3iBOImRpim4n0C22WwQx/EBlstlFpfjQd27O3TvujA7MgZ6C41WG0EQnBAOXRetdhtar4d7TWPn6He32zE/I1yvl9D6HhZ+AZ877/ChU4Bn+/B875RwOMRgMMBsPsd0OkU4HqOn69hut/uEK2i6jZmvQtYvcNnRMLRMuP8I6etcARHajoMoijAej+EHwSlhutmg2W6jrLbQbOio37ZwraqwLAur1Yrll7Ber2HbNirVKmqqiptaja3p2gdX3qYpqo0WLn6W8Eks46PwG1/EMkaj0dkrf8/nkc/n8aNQwNXVFRrNZuZnhLs0hag28VG4xqVyg2+lGr5KFbjBKaHn+7htNCCIIgMpPZPDNZMuKwqKsgKlXEZRkljyjwkNw2A+ipVkmYFIDwgpmJIchiEcx2ZEdF3K2zFhkiTM5zhOFjeZTsEtt/+C3OghuHH/cRzdat/IxwqbB5JkAq0pmJRQwDEh7VF3UDMcnyPk8IKRyn2l3KjNiOwly/H87IOq3xkMGILRCL7vsa6hIqbc0X40mRzklyNTyJNOD2GYJusCXdfR7/dhmB4CL4RlW+z/ZDJB3zAypfxs9sr7m4vFgimgPJK6h4cEoS9gNO0hjpeYzWdsClm2nT3MfwlJIbXcvrXd97jQiwd7dIs3E1J93UcxWsGcQYsShk74ANWbwpwlb1dI5VKv16EZJnqmBd20YFg2DNuGbtlsj3xqvf46IXd0ul1IkoSSokBRZMjUYpKEYlGEJBUhCAI0TTs5d1bhJk1hWhabyNT0BFrTpKYWo3IZRxEGw2HWv6++siiK+CUIfyeKILC1UiqhWq2yIXJdqUBRlLflkBV2GLK557puBlLEBwINWarTc1f+AyXff/6P/z5VAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"openvidu-구조\"\n        title=\"openvidu-구조\"\n        src=\"/static/0f32ed2a058d25828c5c26c819ffbdc5/74cfa/02.png\"\n        srcset=\"/static/0f32ed2a058d25828c5c26c819ffbdc5/e9ff0/02.png 180w,\n/static/0f32ed2a058d25828c5c26c819ffbdc5/f21e7/02.png 360w,\n/static/0f32ed2a058d25828c5c26c819ffbdc5/74cfa/02.png 553w\"\n        sizes=\"(max-width: 553px) 100vw, 553px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<br>\r\nopenvidu의 대략적인 구조는 다음과 같습니다.</p>\n<ul>\n<li>Application client\n<ul>\n<li>Openvidu-browser.js SDK를 사용하여 Openvidu deployment와 통신하고, 세션에 연결, 미디어 스트림 게시 및 구독 등을 관리</li>\n<li>사용자와 직접 상호 작용하는 코드이며 openvidu의 프론트엔드 구현체를 사용할 수 있는 부분</li>\n</ul>\n</li>\n<li>Application server\n<ul>\n<li>Application client로부터 api 요청을 받아 처리해주고 deployment와 연결해주는 부분</li>\n<li>Openvidu deployment가 제공하는 REST API를 사용해서 통신함(Java와 Node SDK를 통해 가능하지만 REST 클라이언트에서 직접 REST API를 호출해서 사용도 가능함)</li>\n<li>본인이 작성한 백엔드 서버가 담당하는 부분</li>\n</ul>\n</li>\n<li>Openvidu deployment\n<ul>\n<li>실시간 오디오 및 비디오 스트리밍에 필요한 모든 인프라를 제공함</li>\n<li>앞서 설명한 Kurento 미디어 서버, turn 서버 등 openvidu가 추상화한 기능들을 제공하는 구현체</li>\n</ul>\n</li>\n</ul>\n<br/>\r\n<br/>\n<h3 id=\"openvidu의-기본-개념\" style=\"position:relative;\"><a href=\"#openvidu%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\" aria-label=\"openvidu의 기본 개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Openvidu의 기본 개념</h3>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 638px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABJ0AAASdAHeZh94AAABnklEQVQ4y3WU167CQAxE+f9v4+XyQgeBKCGAIAm9+epYmtVmCZbMlrFn3ULLzOzz+dj1erXL5eKrlPP9fg96u90abVjhQFr8nM9nezwe9n6/7fV6BeVcFIVrWZbu2GSDLxyBkFd+yWq1ssFgYOPx2I7H40+7L0LSSdOQKirZxLh8FVRIGeWS8HGmZiI7nU4B5x4cO3D2wmuEgKQ3nU49veFwaP1+33a7nROheZ7bZDJxG/Ber2dZlnmEXynzijoulSi9JpwV31rKSgUARyKhAbxMBOyrqvIV/HA42Ha79T2R4ftFGAtE1A6BnPS63W7oMhg2sXw1hSKjz+fTZw4HNYc7lDut2LCXX62GvEj4Gm4GWZ0nVTAVXh3FRkOtaXDCuPiz2cxGo5Gt12s/E2EqRIXzfD73gZetGtTSBiEaCo6SEq+nnUWJVnb4KLoaoUjVuf1+b2VVWYrjvMlz73JMFP4cUuOiLMOnxuvxvKkMNEp1j7HGCKlNu922v07HZzDFIcw2Gx+nlDB0OXZg1haLhX+G1DHFWWnEcrn0BqWE//0pLR5dRThAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"openvidu-구조\"\n        title=\"openvidu-구조\"\n        src=\"/static/d4f0be7b4b336aff8f4637a1749bd5d1/41be6/03.png\"\n        srcset=\"/static/d4f0be7b4b336aff8f4637a1749bd5d1/e9ff0/03.png 180w,\n/static/d4f0be7b4b336aff8f4637a1749bd5d1/f21e7/03.png 360w,\n/static/d4f0be7b4b336aff8f4637a1749bd5d1/41be6/03.png 638w\"\n        sizes=\"(max-width: 638px) 100vw, 638px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<br/></p>\n<ul>\n<li>Session(세션)\n<ul>\n<li>세션은 하나의 가상 공간 개념으로써 참여자들끼리는 서로 오디오와 비디오 스트림을 주고 받을 수 있음</li>\n<li>오직 같은 세션에 참여한 참여자들끼리만 가능함</li>\n</ul>\n</li>\n<li>Connection(연결)\n<ul>\n<li>Connection은 세션의 각 참가자로 표현할 수 있음</li>\n<li>application server에서 반드시 초기화해야하며 세션에 연결하기 위해서는 토큰이 application client에게 전달되어야 함</li>\n<li>이를 통해 허가받지 않은 사람이 세션에 접속할 수 없게 함</li>\n<li>Connection은 클라이언트가 세션에 연결하게 해주는 “Slot”으로 볼 수 있음</li>\n</ul>\n</li>\n<li>Token(토큰)\n<ul>\n<li>토큰은 참가자들이 세션에 접근할 수 있게 허락해줌</li>\n<li>각 참가자들은 세션에 연결하기 위해 토큰을 사용해야 함</li>\n<li>토큰은 항상 “Connection 개념”과 묶여(associated)있기에 클라이언트에게 전달할 token을 얻기 위해서는 application server에서 반드시 Connection을 생성해야함</li>\n<li>토큰은 Connection의 slot을 차지할 수 있는 Key 역할의 Connection의 속성임</li>\n</ul>\n</li>\n<li>Stream(스트림)\n<ul>\n<li>Stream은 세션으로 흐르는 미디어 스트림을 말함</li>\n<li>참가자는 Stream을 배포(publish) 수 있으며 같은 세션의 다른 참가자는 그것을 구독(subscribe)할 수 있음</li>\n</ul>\n</li>\n</ul>\n<br/>\r\n<br/>\r\n<br/>\n<h3 id=\"openvidu-session의-흐름도\" style=\"position:relative;\"><a href=\"#openvidu-session%EC%9D%98-%ED%9D%90%EB%A6%84%EB%8F%84\" aria-label=\"openvidu session의 흐름도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Openvidu Session의 흐름도</h3>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 627px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABJ0AAASdAHeZh94AAAC40lEQVQ4y42V23KaUBSG86h9pz5Ap73tfS86SZNo5KBEYxQCCspJRCQIGDmTv7N3xGqTdlwz/2z2gW+txVp7uHh9fQUxMmZ5hiTNkaY1kiRBnuc4troo8KyqWGvaQb6qIgvDA+OiARZlAVmZQpEHmMi3kJUnTFUNVVVRcFFVePE8iN0uJEmCLIp4kiSMHh4o9B0wzxNouo+d+wWf+5/AGgtY8zmCTYBNEGATRfB0HfJwiE0cI4pjxNstVBLpR8CiyKFMNDjGAG2Zw+NkhvlMQ73fJ5YFAeSHBxiWBcM0YVoWZFmGr2nvgVVZ4lEU8YPpoyOM8JPtQXySEYUhgiBAEIY0wgHL4urmBnedDm5aLfR6PQSz2XtgXZVoD8b49ovF93YX31td8CMJRZ6hKAqUdU2/4VgQcN1q4fLyEretFobDIYL5/KOUC7BCH5cdFlcMj2uGw+BxdFLl1Pcx5DhwgoD23R1Ynsd9v4/1ZPJBylUNZ7GAOp1gpqqYKgos00Rd17TS5FsWux2mPI8xx2HEMJB4HhLHYeu6f4D4wMqyfCtClmG73VJFUYRiv54nCaosA+r6TXsYsYsGQHqNAEjqcRzTeZqmNMITZ6QfdzvkRUEdVE0G+3M0ZfJiE8lut8PLywsdiQMyllVJHRGRSMk+UZokJ87+mTKJYK7rsGwbuq5DN0wYpgXDMOic9CBx3kAaHSL8e9FdrfAcBBQ4m+tY2iYif4WF48B1XWzCEI7jnAAbuzgOt9nwPI9et8bM9Ve0ravDfBvHWC7d84HPvg9n/QwjSmFHGZS1hnvXgR2mMKIEjr+Bt1qdD1wulxjLCiTdgqKbUM0VzIWLp7kJWbcxViawbet8IKlgt9sFz7Hgyc1gGbAMQ0cqjqOtdTYw2GwwFkVIskwlShKt+srzqEiV1+v1+UBS5Xa7DYZlwTAMOiQ6nkdPECAIAl23F4v/A4+vD/0dZBlt+IOShP4WiMjz8dlj+w3TFuqdxAJg9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"openvidu 흐름\"\n        title=\"openvidu 흐름\"\n        src=\"/static/96f76a1ab5276f31c8199ebc41626a3f/e9c9b/04.png\"\n        srcset=\"/static/96f76a1ab5276f31c8199ebc41626a3f/e9ff0/04.png 180w,\n/static/96f76a1ab5276f31c8199ebc41626a3f/f21e7/04.png 360w,\n/static/96f76a1ab5276f31c8199ebc41626a3f/e9c9b/04.png 627w\"\n        sizes=\"(max-width: 627px) 100vw, 627px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<br/></p>\n<ol>\n<li>Application server에서 Session을 초기화 함</li>\n<li>Application server에서 Session에 대한 Connection을 생성함. 이 때 Connection은 Session에 참가자 수 만큼 생성해야함. 각각의 Session은 Session에 단일 접속하게 해주는 Token을 가짐</li>\n<li>Token을 Application client에게 전달함</li>\n<li>각각의 Client는 openvidu-browser.js를 통해 Token으로 Session에 연결함. 이 과정이 성공하면 Session의 참가자로 간주</li>\n<li>Session이 한번 연결되면 참가자는 openvidu-browser.js를 통해 Stream을 publish할 수 있고 Session내의 모든 참여자는 이것을 subscribe 할 수 있음</li>\n</ol>\n<p><a href=\"https://docs.openvidu.io/en/stable/developing-your-video-app/\">이해가 안되시면 공식 문서를 참조해보시기 바랍니다.</a></p>\n<br/>\r\n<br/>\r\n<br/>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://velog.io/@ohsg97/openVidu-tutorial-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">openvidu 개념1</a><br>\n<a href=\"https://2jinishappy.tistory.com/335\">openvidu 개념2</a><br>\n<a href=\"https://velog.io/@ohjinseo/ReactJS-EC2-OpenVidu-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-%ED%99%94%EC%83%81%ED%9A%8C%EC%9D%98-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EA%B8%B0\">openvidu 개념3</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></p>\n</li>\n<li>\n<p><a href=\"#webrtcweb-real-time-communication%EB%9E%80\">WebRTC(Web Real-Time Communication)란</a></p>\n<ul>\n<li><a href=\"#signaling--server\">Signaling / Server</a></li>\n<li><a href=\"#stunsession-traversal-utilities-for-nat-server\">STUN(Session Traversal Utilities for NAT) Server</a></li>\n<li><a href=\"#turntraversal-using-relays-around-nat-server\">TURN(Traversal Using Relays around NAT) Server</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#openvidu%EB%9E%80\">Openvidu란</a></p>\n<ul>\n<li><a href=\"#openvidu%EC%9D%98-%EA%B5%AC%EC%A1%B0\">Openvidu의 구조</a></li>\n<li><a href=\"#openvidu%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\">Openvidu의 기본 개념</a></li>\n<li><a href=\"#openvidu-session%EC%9D%98-%ED%9D%90%EB%A6%84%EB%8F%84\">Openvidu Session의 흐름도</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"August 04, 2023","title":"Openvidu란?","categories":"개발공부 featured","author":"하이영","emoji":"💻"},"fields":{"slug":"/Development/SSAFY/openvidu-series/openvidu-intro/"}},"prev":{"id":"f1b7ec26-111a-5c28-9728-05468eec2736","html":"<h1 id=\"백준-1013-contact\" style=\"position:relative;\"><a href=\"#%EB%B0%B1%EC%A4%80-1013-contact\" aria-label=\"백준 1013 contact permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>백준 1013, Contact</h1>\n<br/>\n<h2 id=\"문제-푸는데-필요한-정보\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%91%B8%EB%8A%94%EB%8D%B0-%ED%95%84%EC%9A%94%ED%95%9C-%EC%A0%95%EB%B3%B4\" aria-label=\"문제 푸는데 필요한 정보 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 푸는데 필요한 정보</h2>\n<ul>\n<li>전파의 기본 단위는 { 0 , 1 } 두 가지로 구성되어있으며, x+ ( ) 는 임의의 개수(최소 1개) x의 반복으로 이루어진 전파의 집합을 나타낸다.</li>\n<li>반복을 의미하는 + 외에도 or 를 의미하는 | 기호가 있다. { x | y } 는 x 혹은 y 를 의미하는 것으로, { 0+ | 1+ } 는 { 0 , 1 , 00 , 11 , 000 , 111 , … } 의 집합을 의미한다.</li>\n<li>정리하면 뒤에 ’+‘가 붙은 숫자는 최소 1번이상 반복되어야하며, 괄호 뒤에 붙은 경우는 해당 괄호가 1회 이상 반복되는 것이다.</li>\n<li>문제에 있는 예시는 경우의 수가 순서대로 나오는 것이 아니여서 이해하는데 어려움이 있었다.</li>\n</ul>\n<br/>\r\n<br/>\n<h2 id=\"문제-푸는데-필요한-알고리즘\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%91%B8%EB%8A%94%EB%8D%B0-%ED%95%84%EC%9A%94%ED%95%9C-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"문제 푸는데 필요한 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 푸는데 필요한 알고리즘</h2>\n<ul>\n<li>백트래킹으로 접근해보았다.</li>\n<li>문제에서 제공하는 패턴인 (100+1+ | 01)+ 의 경우</li>\n<li>우선 괄호안을 볼 때</li>\n</ul>\n<ol>\n<li>100으로 시작하거나\n<ul>\n<li>100으로 시작하면 0이 반복 되어야 하고</li>\n<li>0이 아닌 1이 나오게 되면 다음 0과 1에 따라 경우의 수가 나뉜다.</li>\n<li>1+ 이기에 1이 여러번 반복될 수 있음을 염두해야하며 0이 나오게 된다면 2번에 해당할 수 있는 패턴이기에 1일 때마다 재귀 함수를 추가 호출한다.</li>\n<li>만약 0 이 나오면 바로 break해서 종료 &#x3C;- 내가 실수했던 부분</li>\n</ul>\n</li>\n<li>01로 시작해야한다.</li>\n</ol>\n<ul>\n<li>\n<p>위의 경우들이 계속 반복한다.\r\n<br/></p>\n<br/>\r\n<br/>\n</li>\n</ul>\n<h2 id=\"실수한-내용-및-고찰\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%88%98%ED%95%9C-%EB%82%B4%EC%9A%A9-%EB%B0%8F-%EA%B3%A0%EC%B0%B0\" aria-label=\"실수한 내용 및 고찰 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실수한 내용 및 고찰</h2>\n<ul>\n<li>문제를 읽고 이해하는데 20분이 넘게 걸렸다. 너무 여유롭게 파악하는 버릇이 생긴거 같다… 얼른 고쳐야지</li>\n<li>위에 ‘내가 실수했던 부분’ 코드를 작성하지 않아서 계속 틀렸었다.</li>\n<li>구현 문제를 풀때는 여러 상황과 조건을 미리 파악하고 코드를 작성해야겠다는 생각이 다시 들었다.</li>\n<li>오늘 코테를 만족스럽게 보지 못해서 다시 1일 1솔을 시작했는데… 열심히 해보자!</li>\n<li>(위의 경우가 아닌 정규표현식을 통해 푼 방법도 존재하던데 공부 해보아야겠다.)</li>\n</ul>\n<br/>\r\n<br/>\n<h2 id=\"코드\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C\" aria-label=\"코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sys\r\n\r\n<span class=\"token builtin\">input</span> <span class=\"token operator\">=</span> sys<span class=\"token punctuation\">.</span>stdin<span class=\"token punctuation\">.</span>readline\r\n\r\nT <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n\r\nresult <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\r\n\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">Find</span><span class=\"token punctuation\">(</span>in_str<span class=\"token punctuation\">,</span> idx<span class=\"token punctuation\">,</span> debug<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">global</span> result\r\n    <span class=\"token keyword\">if</span> result<span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">return</span>\r\n\r\n    <span class=\"token keyword\">if</span> idx <span class=\"token operator\">>=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>in_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        result <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\r\n        <span class=\"token keyword\">return</span>\r\n\r\n    <span class=\"token keyword\">if</span> in_str<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">:</span>idx<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"100\"</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># 100과 같은지</span>\r\n        debug <span class=\"token operator\">+=</span> <span class=\"token string\">\"100\"</span>\r\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>idx<span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>in_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> in_str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">:</span>\r\n                debug <span class=\"token operator\">+=</span> <span class=\"token string\">\"0\"</span>\r\n                <span class=\"token keyword\">continue</span>\r\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>in_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n                    <span class=\"token keyword\">if</span> in_str<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">:</span>\r\n                        debug <span class=\"token operator\">+=</span> <span class=\"token string\">\"1\"</span>\r\n\r\n                        Find<span class=\"token punctuation\">(</span>in_str<span class=\"token punctuation\">,</span> j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> debug<span class=\"token punctuation\">)</span>\r\n                    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\r\n                        <span class=\"token keyword\">break</span>\r\n                <span class=\"token keyword\">break</span>\r\n    <span class=\"token keyword\">elif</span> in_str<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">:</span>idx<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"01\"</span><span class=\"token punctuation\">:</span>\r\n        debug <span class=\"token operator\">+=</span> <span class=\"token string\">\"01\"</span>\r\n        Find<span class=\"token punctuation\">(</span>in_str<span class=\"token punctuation\">,</span> idx<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> debug<span class=\"token punctuation\">)</span>\r\n\r\n\r\n<span class=\"token keyword\">for</span> t <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\r\n    result <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\r\n    Find<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> result<span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"YES\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NO\"</span><span class=\"token punctuation\">)</span>\r\n\r\n</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%91%B8%EB%8A%94%EB%8D%B0-%ED%95%84%EC%9A%94%ED%95%9C-%EC%A0%95%EB%B3%B4\">문제 푸는데 필요한 정보</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%91%B8%EB%8A%94%EB%8D%B0-%ED%95%84%EC%9A%94%ED%95%9C-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\">문제 푸는데 필요한 알고리즘</a></li>\n<li><a href=\"#%EC%8B%A4%EC%88%98%ED%95%9C-%EB%82%B4%EC%9A%A9-%EB%B0%8F-%EA%B3%A0%EC%B0%B0\">실수한 내용 및 고찰</a></li>\n<li><a href=\"#%EC%BD%94%EB%93%9C\">코드</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 05, 2023","title":"백준 1013, Contact","categories":"알고리즘","author":"하이영","emoji":"🔮"},"fields":{"slug":"/Algorithm/BackJoon/03.1013/"}},"site":{"siteMetadata":{"siteUrl":"https://bnk159hair.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/Development/SSAFY/openvidu-series/openvidu-deployment-test/","nextSlug":"/Development/SSAFY/openvidu-series/openvidu-intro/","prevSlug":"/Algorithm/BackJoon/03.1013/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}